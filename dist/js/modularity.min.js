parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"OMxo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=function(o){function t(){this.handleEvents()}return t.prototype.open=function(t){o("body").addClass("modularity-modal-open").append('\n            <div id="modularity-modal">\n                <div class="modularity-modal-wrapper">\n                    <button class="modularity-modal-close" data-modularity-modal-action="close">&times;\n\t\t\t\t\t            '.concat(modularityAdminLanguage.close,'\n\t\t\t\t\t          </button>\n                    <div class="modularity-modal-spinner-container" id="modularity-iframe-loader"><span class="modularity-modal-spinner"></span></div>\n                    <iframe class="modularity-modal-iframe" src="').concat(t,'" frameborder="0" onload="document.getElementById(\'modularity-iframe-loader\').style.display=\'none\';" allowtransparency></iframe>\n                </div>\n            </div>\n        ')),!0},t.prototype.close=function(){o("body").removeClass("modularity-modal-open"),o("#modularity-modal").remove(),!1},t.prototype.handleEvents=function(){o(document).on("click",'[data-modularity-modal-action="close"]',function(o){o.preventDefault(),this.close()}.bind(this))},new t}(jQuery);exports.default=o;
},{}],"zveI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(t){var e=!1;function i(){t(function(){t(document).on("click",".modularity-js-thickbox-widget-import-widget",function(i){i.preventDefault(),e=t(i.target).parents(".widget-inside");var o=Modularity.Editor.Module.getImportUrl({postType:t(i.target).parents(".widget-inside").find(".modularity-widget-module-type select").val()});Modularity.Editor.Module.editingModule=t(i.target).closest(".widget-inside"),Modularity.Editor.Thickbox.postAction="import-widget",Modularity.Prompt.Modal.open(o)}),t(document).on("click",".modularity-js-thickbox-open-widget",function(e){e.preventDefault(),t(e.target).closest("a").attr("href").indexOf("post.php")>-1&&(Modularity.Editor.Thickbox.postAction="edit"),editingModule=t(e.target).closest("li"),Modularity.Prompt.Modal.open(t(e.target).closest("a").attr("href"))})})}return i.prototype.isEditingWidget=function(){return e},i.prototype.updateWidget=function(e,i){t(e).find(".modularity-widget-module-id-span").html(i.post_id),t(e).find(".modularity-widget-module-id").val(i.post_id),t(e).find(".modularity-widget-module-edit").attr("href","post.php?post="+i.post_id+"&action=edit&is_thickbox=true").removeClass("hidden"),t(e).find(".modularity-widget-module-title-span").html(i.title),t(e).find(".modularity-widget-module-title").val(i.title)},new i}(jQuery);exports.default=t;
},{}],"MqUa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(t){function e(){t(function(){}.bind(this))}return e.prototype.uuid=function(){return Math.random().toString(36).substr(2,9)},new e}(jQuery);exports.default=t;
},{}],"wUyu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e){var t=!1;function r(){this.handleEvents()}return r.prototype.run=function(){t=!1,this.checkRequired()},r.prototype.checkRequired=function(){var r=e("[required]");r.removeClass("validation-error"),r.each(function(r,i){0===e(i).val().length&&(e(i).parents("li").addClass("validation-error"),e(i).one("change",function(t){e(t.target).parents("li").removeClass("validation-error")}),t=!0)})},r.prototype.handleEvents=function(){e(document).on("click","#modularity-mb-editor-publish #publish",function(){return this.run(),!t||(e("#modularity-mb-editor-publish .spinner").css("visibility","hidden"),!1)}.bind(this))},new r}(jQuery);exports.default=e;
},{}],"ETAS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(t){function o(){}return o.prototype.modulePostCreated=function(o){Modularity.Prompt.Modal.close();var e=Modularity.Editor.Module.isEditingModule(),r={action:"get_post",id:o};t.post(ajaxurl,r,function(t){var o={post_id:t.ID,title:t.post_title};Modularity.Editor.Module.updateModule(e,o),Modularity.Editor.Autosave.save("form")},"json")},new o}(jQuery);exports.default=t;
},{}],"u8w0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(t){var o={is_thickbox:!0},a=!1;function e(){t(function(){"undefined"!=typeof pagenow&&"admin_page_modularity-editor"===pagenow&&(this.handleEvents(),this.loadModules(modularity_post_id))}.bind(this))}return e.prototype.loadModules=function(o){var a={action:"get_post_modules",id:o};t.post(ajaxurl,a,function(o){t.each(o,function(o,a){var e=t('.modularity-sidebar-area[data-area-id="'+o+'"]');t.each(a.modules,function(o,a){"true"===a.hidden&&(a.hidden=!0);var i=void 0===a.sidebar_incompability||t.isEmptyObject(a.sidebar_incompability)?"":JSON.stringify(a.sidebar_incompability);this.addModule(e,a.post_type,a.post_type_name,a.post_title,a.ID,a.hidden,a.columnWidth,a.isDeprecated,i)}.bind(this)),e.removeClass("modularity-spinner")}.bind(this)),this.initCompleted=!0,t(".modularity-sidebar-area").removeClass("modularity-spinner")}.bind(this),"json")},e.prototype.isEditingModule=function(){return a},e.prototype.getThickBoxUrl=function(a,e){var i="",d={};switch(a){case"add":i="post-new.php";break;case"edit":i="post.php"}return"number"==typeof e.postId&&(d.post=e.postId,d.action="edit"),"string"==typeof e.postType&&(d.post_type=e.postType),admin_url+i+"?"+t.param(d)+"&"+t.param(o)},e.prototype.getImportUrl=function(a){var e={};return e.post_type=a.postType,admin_url+"edit.php?"+t.param(e)+"&"+t.param(o)},e.prototype.addModule=function(o,a,e,i,d,n,r,l,s){i=void 0!==i?": "+i:"",d=void 0!==d?d:"",r=void 0!==r?r:"",deprecated=!0===l?'<span class="modularity-deprecated" style="color:#ff0000;">('.concat(modularityAdminLanguage.deprecated,")</span>"):"",s=void 0!==s?s:"";var c=this.getThickBoxUrl("add",{postType:a});Modularity.Editor.Thickbox.postAction="add",d&&(c=this.getThickBoxUrl("edit",{postId:d}),Modularity.Editor.Thickbox.postAction="edit");var p=this.getImportUrl({postType:a}),u="";!0===n&&(u="checked");var m=t(o).data("area-id"),y=Modularity.Helpers.uuid(),h='<li id="post-'.concat(d,'" data-module-id="').concat(a,'" data-module-stored-width="').concat(r,"\" data-sidebar-incompability='").concat(s,'\'>                <span class="modularity-line-wrapper">                    <span class="modularity-sortable-handle"></span>                    <span class="modularity-module-name">                        ').concat(e,"                        ").concat(deprecated,'                        <span class="modularity-module-title">').concat(i,'</span>                        <label class="modularity-module-hide">                            <input type="checkbox" name="modularity_modules[').concat(m,"][").concat(y,'][hidden]" value="hidden" ').concat(u," />                            ").concat(modularityAdminLanguage.langhide,'                        </label>                    </span>                    <span class="modularity-module-columns">                        <label>').concat(modularityAdminLanguage.width,':</label>                        <select name="modularity_modules[').concat(m,"][").concat(y,'][columnWidth]">                            ').concat(modularityAdminLanguage.widthOptions,'                        </select>                    </span>                    <span class="modularity-module-actions">                        <a href="').concat(c,'" data-modularity-modal class="modularity-js-thickbox-open"><span>').concat(modularityAdminLanguage.langedit,'</span></a>                        <a href="').concat(p,'" class="modularity-js-thickbox-import"><span>').concat(modularityAdminLanguage.langimport,'</span></a>                        <a href="#remove" class="modularity-module-remove"><span>').concat(modularityAdminLanguage.langremove,'</span></a>                    </span>                    <input type="hidden" name="modularity_modules[').concat(m,"][").concat(y,'][postid]" class="modularity-js-module-id" value="').concat(d,'" required>                </span>            </li>');t(o).append(h),t(".modularity-sidebar-area > li").each(function(o,a){t(".modularity-module-columns select",t(a)).val(t(a).attr("data-module-stored-width"))}),t(".modularity-js-sortable").sortable("refresh")},e.prototype.updateModule=function(t,o){t.find("a.modularity-js-thickbox-open").attr("href",this.getThickBoxUrl("edit",{postId:o.post_id})),t.find("input.modularity-js-module-id").val(o.post_id).change(),t.find(".modularity-module-title").text(": "+o.title)},e.prototype.removeModule=function(t){confirm(modularityAdminLanguage.actionRemove)&&t.remove()},e.prototype.handleEvents=function(){t(document).on("click",".modularity-module-remove",function(o){o.preventDefault();var a=t(o.target).closest("li");this.removeModule(a)}.bind(this)),t(document).on("click",".modularity-js-thickbox-import",function(o){o.preventDefault();t(o.target).closest("a");a=t(o.target).closest("li"),Modularity.Editor.Thickbox.postAction="import",Modularity.Prompt.Modal.open(t(o.target).closest("a").attr("href"))}),t(document).on("click",".modularity-js-thickbox-open",function(o){o.preventDefault(),t(o.target).closest("a").attr("href").indexOf("post.php")>-1&&(Modularity.Editor.Thickbox.postAction="edit"),a=t(o.target).closest("li"),Modularity.Prompt.Modal.open(t(o.target).closest("a").attr("href"))})},new e}(jQuery);exports.default=t;
},{}],"pSCb":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e){function a(){e(function(){"undefined"!=typeof pagenow&&"admin_page_modularity-editor"===pagenow&&this.init()}.bind(this))}return a.prototype.init=function(){this.setupDraggable(),this.setupDroppable(),this.setupSortable()},a.prototype.setupSortable=function(){e(".modularity-js-sortable").sortable({handle:".modularity-sortable-handle",connectWith:".modularity-js-sortable",placeholder:"ui-sortable-placeholder",start:function(e,a){try{var o=jQuery(a.item).attr("data-sidebar-incompability");(o=JSON.parse(o))&&"object"===t(o)&&jQuery(".modularity-sidebar-area").each(function(t,e){o.includes(jQuery(this).attr("data-area-id"))?jQuery(this).parent().parent().addClass("modularity-incompatible-area"):jQuery(this).parent().parent().removeClass("modularity-incompatible-area")})}catch(r){console.log("Incompability information not defined - "+r)}},stop:function(t,a){var o=a.item.parents("ul").data("area-id");a.item.find('input[name^="modularity_modules"]').each(function(t,a){var r=e(this).attr("name").replace(/\[(.*?)\]/i,"["+o+"]");e(this).attr("name",r)}),jQuery("[id^=modularity-mb-]").removeClass("modularity-incompatible-area")}}).bind(this)},a.prototype.setupDraggable=function(){e(".modularity-js-draggable").draggable({appendTo:"body",containment:"document",scroll:!1,helper:"clone",revert:"invalid",revertDuration:200,start:function(e,a){try{var o=jQuery(this).attr("data-sidebar-incompability");(o=JSON.parse(o))&&"object"===t(o)&&jQuery(".modularity-sidebar-area").each(function(t,e){o.includes(jQuery(this).attr("data-area-id"))?jQuery(this).parent().parent().addClass("modularity-incompatible-area"):jQuery(this).parent().parent().removeClass("modularity-incompatible-area")})}catch(r){console.log("Incompability information not defined - "+r)}},stop:function(t,e){jQuery("[id^=modularity-mb-]").removeClass("modularity-incompatible-area")}})},a.prototype.setupDroppable=function(){e(".modularity-js-droppable").droppable({accept:".modularity-js-draggable",hoverClass:"modularity-state-droppable",drop:function(t,e){this.appendModule(t,e)}.bind(this)}).bind(this)},a.prototype.appendModule=function(t,e){var a=e.draggable,o=a.find(".modularity-module-name").text(),r=a.data("module-id"),i=a.attr("data-sidebar-incompability");Modularity.Editor.Module.addModule(t.target,r,o,void 0,void 0,void 0,void 0,void 0,i)},new a}(jQuery);exports.default=e;
},{}],"jhPw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=function(i){function t(){i(function(){})}return t.prototype.save=function(t){i("#modularity-options #publishing-action .spinner").css("visibility","visible");var e=i(t).serializeObject();e.id=modularity_post_id,e.action="save_modules",i.post(ajaxurl,e,function(){i("#modularity-options #publishing-action .spinner").css("visibility","hidden")})},new t}(jQuery);exports.default=i;
},{}],"KQZp":[function(require,module,exports) {
"use strict";var e=s(require("./prompt/modal")),t=s(require("./helpers/widget")),i=s(require("./helpers/helpers")),o=s(require("./editor/validate")),r=s(require("./editor/thickbox")),a=s(require("./editor/module")),l=s(require("./editor/dragAndDrop")),d=s(require("./editor/autosave"));function s(e){return e&&e.__esModule?e:{default:e}}var u=u||{};u.Prompt={Modal:e.default},u.Helpers=i.default,u.Helpers.Widget=t.default,u.Editor={Validate:o.default,Thickbox:r.default,Module:a.default,DragAndDrop:l.default,Autosave:d.default},function(e){e('input[type="checkbox"].sidebar-area-activator').on("click",function(t){var i=e(this).is(":checked"),o=e(this).attr("value");alert(1),t.shiftKey&&(i?e('input.sidebar-area-activator[type="checkbox"][value="'+o+'"]').attr("checked",!0):e('input.sidebar-area-activator[type="checkbox"][value="'+o+'"]').attr("checked",!1))})}(jQuery),function(e){e("#modularity-options #publish").on("click",function(){e(this).siblings(".spinner").css("visibility","visible")}),e('a.wp-first-item[href="admin.php?page=modularity"]').parent("li").remove(),e("#modularity-tabs a").on("click",function(){return wp.autosave&&(e(window).unbind(),wp.autosave.server.triggerSave(),e(document).ajaxComplete(function(){return!0})),!0})}(jQuery),jQuery(document).ready(function(e){if(e("#modularity-mb-modules").length){var t=e("#modularity-mb-modules").offset();e(document).scroll(function(){e(window).scrollTop()+50>t.top&&!e("#modularity-mb-modules").hasClass("is-fixed")?e("#modularity-mb-modules").addClass("is-fixed"):e(window).scrollTop()+50<t.top&&e("#modularity-mb-modules").hasClass("is-fixed")&&e("#modularity-mb-modules").removeClass("is-fixed")})}e(".modularity-edit-module a").on("click",function(t){t.preventDefault(),u.Editor.Thickbox.postAction="edit-inline-not-saved",u.Prompt.Modal.open(e(t.target).closest("a").attr("href"))})}),jQuery(document).ready(function(e){e(".frontend-filter").hide(),"post"!==e("#modularity-latest-post-type select").val()&&"page"!==e("#modularity-latest-post-type select").val()||e(".frontend-filter").show(),e("body").on("change","#modularity-latest-post-type select",function(){"post"===e("#modularity-latest-post-type select").val()||"page"===e("#modularity-latest-post-type select").val()?e(".frontend-filter").show():e(".frontend-filter").hide()}).trigger("change")});
},{"./prompt/modal":"OMxo","./helpers/widget":"zveI","./helpers/helpers":"MqUa","./editor/validate":"wUyu","./editor/thickbox":"ETAS","./editor/module":"u8w0","./editor/dragAndDrop":"pSCb","./editor/autosave":"jhPw"}]},{},["KQZp"], null)
//# sourceMappingURL=/modularity.min.js.map