{"version":3,"sources":["prompt/modal.js","helpers/widget.js","helpers/helpers.js","editor/validate.js","editor/thickbox.js","editor/module.js","editor/dragAndDrop.js","editor/autosave.js","modularity.js"],"names":["$","Modal","handleEvents","prototype","open","url","addClass","append","modularityAdminLanguage","close","removeClass","remove","document","on","e","preventDefault","bind","jQuery","editingWidget","Widget","target","parents","importUrl","Modularity","Editor","Module","getImportUrl","postType","find","val","editingModule","closest","Thickbox","postAction","Prompt","attr","indexOf","isEditingWidget","updateWidget","widget","data","html","post_id","title","Helpers","uuid","Math","random","toString","substr","hasErrors","Validate","run","checkRequired","required","each","index","element","length","one","css","modulePostCreated","postId","module","isEditingModule","request","action","id","post","ajaxurl","response","ID","post_title","updateModule","Autosave","save","initCompleted","thickboxOptions","is_thickbox","pagenow","loadModules","modularity_post_id","sidebar","modules","sidebarElement","key","hidden","incompability","sidebar_incompability","isEmptyObject","JSON","stringify","addModule","post_type","post_type_name","columnWidth","isDeprecated","getThickBoxUrl","base","querystring","admin_url","param","moduleId","moduleName","moduleTitle","deprecated","thickboxUrl","isHidden","sidebarId","itemRowId","langhide","width","widthOptions","langedit","langimport","langremove","item","sortable","change","text","removeModule","confirm","actionRemove","DragAndDrop","init","setupDraggable","setupDroppable","setupSortable","handle","connectWith","placeholder","start","ui","validTargetAreas","parse","includes","parent","error","console","log","stop","newName","replace","draggable","appendTo","containment","scroll","helper","revert","revertDuration","event","droppable","accept","hoverClass","drop","appendModule","undefined","selector","serializeObject","isChecked","is","value","alert","shiftKey","siblings","wp","autosave","window","unbind","server","triggerSave","ajaxComplete","ready","offset","scrollTop","top","hasClass","hide","show","trigger"],"mappings":"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","file":"modularity.min.js","sourceRoot":"..\\..\\source\\js","sourcesContent":["/* eslint-disable no-implicit-globals */\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable no-undef */\r\nexport default (function ($) {\r\n\tlet isOpen = false;\r\n\r\n\tfunction Modal() {\r\n\t\tthis.handleEvents();\r\n\t}\r\n\r\n\tModal.prototype.open = function (url) {\r\n\t\t$('body').addClass('modularity-modal-open').append(\r\n\t\t\t`\r\n            <div id=\"modularity-modal\">\r\n                <div class=\"modularity-modal-wrapper\">\r\n                    <button class=\"modularity-modal-close\" data-modularity-modal-action=\"close\">&times;\r\n\t\t\t\t\t            ${modularityAdminLanguage.close}\r\n\t\t\t\t\t          </button>\r\n                    <div class=\"modularity-modal-spinner-container\" id=\"modularity-iframe-loader\"><span class=\"modularity-modal-spinner\"></span></div>\r\n                    <iframe class=\"modularity-modal-iframe\" src=\"${url}\" frameborder=\"0\" onload=\"document.getElementById('modularity-iframe-loader').style.display='none';\" allowtransparency></iframe>\r\n                </div>\r\n            </div>\r\n        `\r\n\t\t);\r\n\r\n\t\tisOpen = true;\r\n\t};\r\n\r\n\tModal.prototype.close = function () {\r\n\t\t$('body').removeClass('modularity-modal-open');\r\n\t\t$('#modularity-modal').remove();\r\n\t\tisOpen = false;\r\n\t};\r\n\r\n\tModal.prototype.handleEvents = function () {\r\n\t\t$(document).on(\r\n\t\t\t'click',\r\n\t\t\t'[data-modularity-modal-action=\"close\"]',\r\n\t\t\tfunction (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.close();\r\n\t\t\t}.bind(this)\r\n\t\t);\r\n\t};\r\n\r\n\treturn new Modal();\r\n})(jQuery);\r\n","/* eslint-disable no-implicit-globals */\r\n/* eslint-disable no-undef */\r\nexport default (function ($) {\r\n\tlet editingWidget = false;\r\n\r\n\tfunction Widget() {\r\n\t\t$(function () {\r\n\t\t\t/* Import */\r\n\t\t\t$(document).on(\r\n\t\t\t\t'click',\r\n\t\t\t\t'.modularity-js-thickbox-widget-import-widget',\r\n\t\t\t\tfunction (e) {\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\teditingWidget = $(e.target).parents('.widget-inside');\r\n\r\n\t\t\t\t\tconst importUrl = Modularity.Editor.Module.getImportUrl({\r\n\t\t\t\t\t\tpostType: $(e.target)\r\n\t\t\t\t\t\t\t.parents('.widget-inside')\r\n\t\t\t\t\t\t\t.find('.modularity-widget-module-type select')\r\n\t\t\t\t\t\t\t.val(),\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tModularity.Editor.Module.editingModule = $(e.target).closest(\r\n\t\t\t\t\t\t'.widget-inside'\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tModularity.Editor.Thickbox.postAction = 'import-widget';\r\n\t\t\t\t\tModularity.Prompt.Modal.open(importUrl);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\t/* Edit */\r\n\t\t\t$(document).on('click', '.modularity-js-thickbox-open-widget', function (\r\n\t\t\t\te\r\n\t\t\t) {\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tconst el = $(e.target).closest('a');\r\n\t\t\t\tif (el.attr('href').indexOf('post.php') > -1) {\r\n\t\t\t\t\tModularity.Editor.Thickbox.postAction = 'edit';\r\n\t\t\t\t}\r\n\r\n\t\t\t\teditingModule = $(e.target).closest('li');\r\n\r\n\t\t\t\tModularity.Prompt.Modal.open($(e.target).closest('a').attr('href'));\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tWidget.prototype.isEditingWidget = function () {\r\n\t\treturn editingWidget;\r\n\t};\r\n\r\n\tWidget.prototype.updateWidget = function (widget, data) {\r\n\t\t$(widget).find('.modularity-widget-module-id-span').html(data.post_id);\r\n\t\t$(widget).find('.modularity-widget-module-id').val(data.post_id);\r\n\t\t$(widget)\r\n\t\t\t.find('.modularity-widget-module-edit')\r\n\t\t\t.attr(\r\n\t\t\t\t'href',\r\n\t\t\t\t'post.php?post=' + data.post_id + '&action=edit&is_thickbox=true'\r\n\t\t\t)\r\n\t\t\t.removeClass('hidden');\r\n\t\t$(widget).find('.modularity-widget-module-title-span').html(data.title);\r\n\t\t$(widget).find('.modularity-widget-module-title').val(data.title);\r\n\t};\r\n\r\n\treturn new Widget();\r\n})(jQuery);\r\n","/* eslint-disable no-empty-function */\r\n/* eslint-disable no-extra-bind */\r\n/* eslint-disable no-undef */\r\n/* eslint-disable no-implicit-globals */\r\nexport default (function ($) {\r\n\tfunction Helpers() {\r\n\t\t$(function () {}.bind(this));\r\n\t}\r\n\r\n\tHelpers.prototype.uuid = function () {\r\n\t\treturn Math.random().toString(36).substr(2, 9);\r\n\t};\r\n\r\n\treturn new Helpers();\r\n})(jQuery);\r\n","export default (function ($) {\r\n\tlet hasErrors = false;\r\n\tconst errorClass = 'validation-error';\r\n\r\n\tfunction Validate() {\r\n\t\tthis.handleEvents();\r\n\t}\r\n\r\n\t/**\r\n\t * Run validation methods\r\n\t *\r\n\t * @return {void}\r\n\t */\r\n\tValidate.prototype.run = function () {\r\n\t\thasErrors = false;\r\n\t\tthis.checkRequired();\r\n\t};\r\n\r\n\t/**\r\n\t * Check required fileds is not empty\r\n\t *\r\n\t * @return {void}\r\n\t */\r\n\tValidate.prototype.checkRequired = function () {\r\n\t\tconst required = $('[required]');\r\n\t\trequired.removeClass(errorClass);\r\n\r\n\t\trequired.each(function (index, element) {\r\n\t\t\tif ($(element).val().length === 0) {\r\n\t\t\t\t$(element).parents('li').addClass(errorClass);\r\n\r\n\t\t\t\t$(element).one('change', function (e) {\r\n\t\t\t\t\t$(e.target).parents('li').removeClass(errorClass);\r\n\t\t\t\t});\r\n\r\n\t\t\t\thasErrors = true;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Handle events\r\n\t *\r\n\t * @return {void}\r\n\t */\r\n\tValidate.prototype.handleEvents = function () {\r\n\t\t$(document).on(\r\n\t\t\t'click',\r\n\t\t\t'#modularity-mb-editor-publish #publish',\r\n\t\t\tfunction () {\r\n\t\t\t\tthis.run();\r\n\r\n\t\t\t\tif (hasErrors) {\r\n\t\t\t\t\t$('#modularity-mb-editor-publish .spinner').css(\r\n\t\t\t\t\t\t'visibility',\r\n\t\t\t\t\t\t'hidden'\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}.bind(this)\r\n\t\t);\r\n\t};\r\n\r\n\treturn new Validate();\r\n})(jQuery);\r\n","export default (function ($) {\r\n\t/**\r\n\t * Attention: This variable should not be set manually\r\n\t *\r\n\t * Indicates if we are adding a new post or editing old one\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tconst postAction = 'add';\r\n\r\n\tfunction Thickbox() {}\r\n\r\n\tThickbox.prototype.modulePostCreated = function (postId) {\r\n\t\tModularity.Prompt.Modal.close();\r\n\r\n\t\tconst module = Modularity.Editor.Module.isEditingModule();\r\n\r\n\t\tconst request = {\r\n\t\t\taction: 'get_post',\r\n\t\t\tid: postId,\r\n\t\t};\r\n\r\n\t\t$.post(\r\n\t\t\tajaxurl,\r\n\t\t\trequest,\r\n\t\t\tfunction (response) {\r\n\t\t\t\tconst data = {\r\n\t\t\t\t\tpost_id: response.ID,\r\n\t\t\t\t\ttitle: response.post_title,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tModularity.Editor.Module.updateModule(module, data);\r\n\t\t\t\tModularity.Editor.Autosave.save('form');\r\n\t\t\t},\r\n\t\t\t'json'\r\n\t\t);\r\n\t};\r\n\r\n\treturn new Thickbox();\r\n})(jQuery);\r\n","/* eslint-disable no-alert */\r\n/* eslint-disable camelcase */\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable no-implicit-globals */\r\n/* eslint-disable no-undef */\r\nexport default (function ($) {\r\n\tconst initCompleted = false;\r\n\r\n\t/**\r\n\t * Object to create Thickbox querystring from\r\n\t *\r\n\t * @type {Object}\r\n\t */\r\n\tconst thickboxOptions = {\r\n\t\tis_thickbox: true,\r\n\t};\r\n\r\n\tlet editingModule = false;\r\n\r\n\tfunction Module() {\r\n\t\t$(\r\n\t\t\tfunction () {\r\n\t\t\t\tif (\r\n\t\t\t\t\ttypeof pagenow !== 'undefined' &&\r\n\t\t\t\t\tpagenow === 'admin_page_modularity-editor'\r\n\t\t\t\t) {\r\n\t\t\t\t\tthis.handleEvents();\r\n\t\t\t\t\tthis.loadModules(modularity_post_id);\r\n\t\t\t\t}\r\n\t\t\t}.bind(this)\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Loads saved modules and adds them to the page\r\n\t *\r\n\t * @param  {number} postId The post id to load modules from\r\n\t * @return {void}\r\n\t */\r\n\tModule.prototype.loadModules = function (postId) {\r\n\t\tconst request = {\r\n\t\t\taction: 'get_post_modules',\r\n\t\t\tid: postId,\r\n\t\t};\r\n\r\n\t\t$.post(\r\n\t\t\tajaxurl,\r\n\t\t\trequest,\r\n\t\t\tfunction (response) {\r\n\t\t\t\t$.each(\r\n\t\t\t\t\tresponse,\r\n\t\t\t\t\tfunction (sidebar, modules) {\r\n\t\t\t\t\t\tconst sidebarElement = $(\r\n\t\t\t\t\t\t\t'.modularity-sidebar-area[data-area-id=\"' + sidebar + '\"]'\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t$.each(\r\n\t\t\t\t\t\t\tmodules.modules,\r\n\t\t\t\t\t\t\tfunction (key, data) {\r\n\t\t\t\t\t\t\t\tif (data.hidden === 'true') {\r\n\t\t\t\t\t\t\t\t\tdata.hidden = true;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tconst incompability =\r\n\t\t\t\t\t\t\t\t\ttypeof data.sidebar_incompability !== 'undefined' &&\r\n\t\t\t\t\t\t\t\t\t!$.isEmptyObject(data.sidebar_incompability)\r\n\t\t\t\t\t\t\t\t\t\t? JSON.stringify(data.sidebar_incompability)\r\n\t\t\t\t\t\t\t\t\t\t: '';\r\n\t\t\t\t\t\t\t\tthis.addModule(\r\n\t\t\t\t\t\t\t\t\tsidebarElement,\r\n\t\t\t\t\t\t\t\t\tdata.post_type,\r\n\t\t\t\t\t\t\t\t\tdata.post_type_name,\r\n\t\t\t\t\t\t\t\t\tdata.post_title,\r\n\t\t\t\t\t\t\t\t\tdata.ID,\r\n\t\t\t\t\t\t\t\t\tdata.hidden,\r\n\t\t\t\t\t\t\t\t\tdata.columnWidth,\r\n\t\t\t\t\t\t\t\t\tdata.isDeprecated,\r\n\t\t\t\t\t\t\t\t\tincompability\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tsidebarElement.removeClass('modularity-spinner');\r\n\t\t\t\t\t}.bind(this)\r\n\t\t\t\t);\r\n\r\n\t\t\t\tthis.initCompleted = true;\r\n\t\t\t\t$('.modularity-sidebar-area').removeClass('modularity-spinner');\r\n\t\t\t}.bind(this),\r\n\t\t\t'json'\r\n\t\t);\r\n\t};\r\n\r\n\t/**\r\n\t * Check editing module\r\n\t *\r\n\t * @return {boolean|string} Returns boolean or string\r\n\t */\r\n\tModule.prototype.isEditingModule = function () {\r\n\t\treturn editingModule;\r\n\t};\r\n\r\n\t/**\r\n\t * Generates a thickbox url to open a thickbox in correct mode\r\n\t *\r\n\t * @param  {string} action Should be \"add\" or \"edit\"\r\n\t * @param  {Object} data   Should contain additional data (for now supports \"postId\" and \"postType\")\r\n\t * @return {string}        Thickbox url\r\n\t */\r\n\tModule.prototype.getThickBoxUrl = function (action, data) {\r\n\t\tlet base = '';\r\n\t\tconst querystring = {};\r\n\r\n\t\tswitch (action) {\r\n\t\t\tcase 'add':\r\n\t\t\t\tbase = 'post-new.php';\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'edit':\r\n\t\t\t\tbase = 'post.php';\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif (typeof data.postId === 'number') {\r\n\t\t\tquerystring.post = data.postId;\r\n\t\t\tquerystring.action = 'edit';\r\n\t\t}\r\n\r\n\t\tif (typeof data.postType === 'string') {\r\n\t\t\tquerystring.post_type = data.postType;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\tadmin_url +\r\n\t\t\tbase +\r\n\t\t\t'?' +\r\n\t\t\t$.param(querystring) +\r\n\t\t\t'&' +\r\n\t\t\t$.param(thickboxOptions)\r\n\t\t);\r\n\t};\r\n\r\n\tModule.prototype.getImportUrl = function (data) {\r\n\t\tconst base = 'edit.php';\r\n\t\tconst querystring = {};\r\n\r\n\t\tquerystring.post_type = data.postType;\r\n\r\n\t\treturn (\r\n\t\t\tadmin_url +\r\n\t\t\tbase +\r\n\t\t\t'?' +\r\n\t\t\t$.param(querystring) +\r\n\t\t\t'&' +\r\n\t\t\t$.param(thickboxOptions)\r\n\t\t);\r\n\t};\r\n\r\n\t/**\r\n\t * Adds a module \"row\" to the target placeholder\r\n\t *\r\n\t * @param {Object} target   The target selector\r\n\t * @param {string} moduleId   The module id slug\r\n\t * @param {string} moduleName The module name\r\n\t * @param {string} moduleTitle Title\r\n\t * @param {number} postId Id\r\n\t * @param {boolean} hidden Is Hidden\r\n\t * @param {number} columnWidth Column Width\r\n\t * @param {boolean} isDeprecated Is Deprecated\r\n\t * @param {boolean} incompability Is Incompatible?\r\n\t * @return {void}\r\n\t */\r\n\tModule.prototype.addModule = function (\r\n\t\ttarget,\r\n\t\tmoduleId,\r\n\t\tmoduleName,\r\n\t\tmoduleTitle,\r\n\t\tpostId,\r\n\t\thidden,\r\n\t\tcolumnWidth,\r\n\t\tisDeprecated,\r\n\t\tincompability\r\n\t) {\r\n\t\tmoduleTitle = typeof moduleTitle !== 'undefined' ? ': ' + moduleTitle : '';\r\n\t\tpostId = typeof postId !== 'undefined' ? postId : '';\r\n\t\tcolumnWidth = typeof columnWidth !== 'undefined' ? columnWidth : '';\r\n\t\tdeprecated =\r\n\t\t\tisDeprecated === true\r\n\t\t\t\t? `<span class=\"modularity-deprecated\" style=\"color:#ff0000;\">(${modularityAdminLanguage.deprecated})</span>`\r\n\t\t\t\t: '';\r\n\t\tincompability = typeof incompability !== 'undefined' ? incompability : '';\r\n\r\n\t\t// Get thickbox url\r\n\t\tlet thickboxUrl = this.getThickBoxUrl('add', {\r\n\t\t\tpostType: moduleId,\r\n\t\t});\r\n\r\n\t\t// Set thickbox action\r\n\t\tModularity.Editor.Thickbox.postAction = 'add';\r\n\r\n\t\tif (postId) {\r\n\t\t\tthickboxUrl = this.getThickBoxUrl('edit', {\r\n\t\t\t\tpostId,\r\n\t\t\t});\r\n\r\n\t\t\tModularity.Editor.Thickbox.postAction = 'edit';\r\n\t\t}\r\n\r\n\t\t// Get import url\r\n\t\tconst importUrl = this.getImportUrl({\r\n\t\t\tpostType: moduleId,\r\n\t\t});\r\n\r\n\t\t// Check/uncheck hidden checkbox\r\n\t\tlet isHidden = '';\r\n\t\tif (hidden === true) {\r\n\t\t\tisHidden = 'checked';\r\n\t\t}\r\n\r\n\t\tconst sidebarId = $(target).data('area-id');\r\n\t\tconst itemRowId = Modularity.Helpers.uuid();\r\n\r\n\t\tconst html = `<li id=\"post-${postId}\" data-module-id=\"${moduleId}\" data-module-stored-width=\"${columnWidth}\" data-sidebar-incompability='${incompability}'>                <span class=\"modularity-line-wrapper\">                    <span class=\"modularity-sortable-handle\"></span>                    <span class=\"modularity-module-name\">                        ${moduleName}                        ${deprecated}                        <span class=\"modularity-module-title\">${moduleTitle}</span>                        <label class=\"modularity-module-hide\">                            <input type=\"checkbox\" name=\"modularity_modules[${sidebarId}][${itemRowId}][hidden]\" value=\"hidden\" ${isHidden} />                            ${modularityAdminLanguage.langhide}                        </label>                    </span>                    <span class=\"modularity-module-columns\">                        <label>${modularityAdminLanguage.width}:</label>                        <select name=\"modularity_modules[${sidebarId}][${itemRowId}][columnWidth]\">                            ${modularityAdminLanguage.widthOptions}                        </select>                    </span>                    <span class=\"modularity-module-actions\">                        <a href=\"${thickboxUrl}\" data-modularity-modal class=\"modularity-js-thickbox-open\"><span>${modularityAdminLanguage.langedit}</span></a>                        <a href=\"${importUrl}\" class=\"modularity-js-thickbox-import\"><span>${modularityAdminLanguage.langimport}</span></a>                        <a href=\"#remove\" class=\"modularity-module-remove\"><span>${modularityAdminLanguage.langremove}</span></a>                    </span>                    <input type=\"hidden\" name=\"modularity_modules[${sidebarId}][${itemRowId}][postid]\" class=\"modularity-js-module-id\" value=\"${postId}\" required>                </span>            </li>`;\r\n\r\n\t\t// Store\r\n\t\t$(target).append(html);\r\n\r\n\t\t// Update width selector\r\n\t\t$('.modularity-sidebar-area > li').each(function (index, item) {\r\n\t\t\t$('.modularity-module-columns select', $(item)).val(\r\n\t\t\t\t$(item).attr('data-module-stored-width')\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\t// Refresh\r\n\t\t$('.modularity-js-sortable').sortable('refresh');\r\n\t};\r\n\r\n\t/**\r\n\t * Updates a module \"row\" after editing the module post\r\n\t *\r\n\t * @param  {HTMLElement} module    Module dom element\r\n\t * @param  {Object} data   The data\r\n\t * @return {void}\r\n\t */\r\n\tModule.prototype.updateModule = function (module, data) {\r\n\t\t// Href\r\n\t\tmodule.find('a.modularity-js-thickbox-open').attr(\r\n\t\t\t'href',\r\n\t\t\tthis.getThickBoxUrl('edit', {\r\n\t\t\t\tpostId: data.post_id,\r\n\t\t\t})\r\n\t\t);\r\n\r\n\t\t// Post id input\r\n\t\tmodule.find('input.modularity-js-module-id').val(data.post_id).change();\r\n\r\n\t\t// Post title\r\n\t\tmodule.find('.modularity-module-title').text(': ' + data.title);\r\n\t};\r\n\r\n\t/**\r\n\t * Removes a module \"row\" from the placeholder\r\n\t *\r\n\t * @param  {HTMLElement} module The (to be removed) module's dom element\r\n\t * @return {void}\r\n\t */\r\n\tModule.prototype.removeModule = function (module) {\r\n\t\tif (confirm(modularityAdminLanguage.actionRemove)) {\r\n\t\t\tmodule.remove();\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Handle events\r\n\t *\r\n\t * @return {void}\r\n\t */\r\n\tModule.prototype.handleEvents = function () {\r\n\t\t// Trash icon\r\n\t\t$(document).on(\r\n\t\t\t'click',\r\n\t\t\t'.modularity-module-remove',\r\n\t\t\tfunction (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tconst target = $(e.target).closest('li');\r\n\t\t\t\tthis.removeModule(target);\r\n\t\t\t}.bind(this)\r\n\t\t);\r\n\r\n\t\t// Import\r\n\t\t$(document).on('click', '.modularity-js-thickbox-import', function (e) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tconst el = $(e.target).closest('a');\r\n\t\t\teditingModule = $(e.target).closest('li');\r\n\r\n\t\t\tModularity.Editor.Thickbox.postAction = 'import';\r\n\t\t\tModularity.Prompt.Modal.open($(e.target).closest('a').attr('href'));\r\n\t\t});\r\n\r\n\t\t// Edit\r\n\t\t$(document).on('click', '.modularity-js-thickbox-open', function (e) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tconst el = $(e.target).closest('a');\r\n\t\t\tif (el.attr('href').indexOf('post.php') > -1) {\r\n\t\t\t\tModularity.Editor.Thickbox.postAction = 'edit';\r\n\t\t\t}\r\n\r\n\t\t\teditingModule = $(e.target).closest('li');\r\n\r\n\t\t\tModularity.Prompt.Modal.open($(e.target).closest('a').attr('href'));\r\n\t\t});\r\n\t};\r\n\r\n\treturn new Module();\r\n})(jQuery);\r\n","/* eslint-disable no-console */\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable no-implicit-globals */\r\n/* eslint-disable no-undef */\r\nexport default (function ($) {\r\n\tlet sortableIn;\r\n\r\n\tfunction DragAndDrop() {\r\n\t\t$(\r\n\t\t\tfunction () {\r\n\t\t\t\tif (\r\n\t\t\t\t\ttypeof pagenow !== 'undefined' &&\r\n\t\t\t\t\tpagenow === 'admin_page_modularity-editor'\r\n\t\t\t\t) {\r\n\t\t\t\t\tthis.init();\r\n\t\t\t\t}\r\n\t\t\t}.bind(this)\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Initialize\r\n\t *\r\n\t * @return {void}\r\n\t */\r\n\tDragAndDrop.prototype.init = function () {\r\n\t\tthis.setupDraggable();\r\n\t\tthis.setupDroppable();\r\n\t\tthis.setupSortable();\r\n\t};\r\n\r\n\tDragAndDrop.prototype.setupSortable = function () {\r\n\t\t$('.modularity-js-sortable')\r\n\t\t\t.sortable({\r\n\t\t\t\thandle: '.modularity-sortable-handle',\r\n\t\t\t\tconnectWith: '.modularity-js-sortable',\r\n\t\t\t\tplaceholder: 'ui-sortable-placeholder',\r\n\t\t\t\tstart(e, ui) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlet validTargetAreas = jQuery(ui.item).attr(\r\n\t\t\t\t\t\t\t'data-sidebar-incompability'\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tvalidTargetAreas = JSON.parse(validTargetAreas);\r\n\t\t\t\t\t\tif (validTargetAreas && typeof validTargetAreas === 'object') {\r\n\t\t\t\t\t\t\tjQuery('.modularity-sidebar-area').each(function (\r\n\t\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\t\tsidebar\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t!validTargetAreas.includes(jQuery(this).attr('data-area-id'))\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tjQuery(this)\r\n\t\t\t\t\t\t\t\t\t\t.parent()\r\n\t\t\t\t\t\t\t\t\t\t.parent()\r\n\t\t\t\t\t\t\t\t\t\t.removeClass('modularity-incompatible-area');\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tjQuery(this)\r\n\t\t\t\t\t\t\t\t\t\t.parent()\r\n\t\t\t\t\t\t\t\t\t\t.parent()\r\n\t\t\t\t\t\t\t\t\t\t.addClass('modularity-incompatible-area');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.log('Incompability information not defined - ' + error);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tstop(e, ui) {\r\n\t\t\t\t\tconst sidebarId = ui.item.parents('ul').data('area-id');\r\n\t\t\t\t\tui.item\r\n\t\t\t\t\t\t.find('input[name^=\"modularity_modules\"]')\r\n\t\t\t\t\t\t.each(function (index, element) {\r\n\t\t\t\t\t\t\tconst newName = $(this)\r\n\t\t\t\t\t\t\t\t.attr('name')\r\n\t\t\t\t\t\t\t\t.replace(/\\[(.*?)\\]/i, '[' + sidebarId + ']');\r\n\t\t\t\t\t\t\t$(this).attr('name', newName);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tjQuery('[id^=modularity-mb-]').removeClass(\r\n\t\t\t\t\t\t'modularity-incompatible-area'\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\t.bind(this);\r\n\t};\r\n\r\n\t/**\r\n\t * Setup draggable functionallity\r\n\t *\r\n\t * @return {void}\r\n\t */\r\n\tDragAndDrop.prototype.setupDraggable = function () {\r\n\t\t$('.modularity-js-draggable').draggable({\r\n\t\t\tappendTo: 'body',\r\n\t\t\tcontainment: 'document',\r\n\t\t\tscroll: false,\r\n\t\t\thelper: 'clone',\r\n\t\t\trevert: 'invalid',\r\n\t\t\trevertDuration: 200,\r\n\t\t\tstart(event, ui) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet validTargetAreas = jQuery(this).attr(\r\n\t\t\t\t\t\t'data-sidebar-incompability'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tvalidTargetAreas = JSON.parse(validTargetAreas);\r\n\r\n\t\t\t\t\tif (validTargetAreas && typeof validTargetAreas === 'object') {\r\n\t\t\t\t\t\tjQuery('.modularity-sidebar-area').each(function (index, sidebar) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t!validTargetAreas.includes(jQuery(this).attr('data-area-id'))\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tjQuery(this)\r\n\t\t\t\t\t\t\t\t\t.parent()\r\n\t\t\t\t\t\t\t\t\t.parent()\r\n\t\t\t\t\t\t\t\t\t.removeClass('modularity-incompatible-area');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tjQuery(this)\r\n\t\t\t\t\t\t\t\t\t.parent()\r\n\t\t\t\t\t\t\t\t\t.parent()\r\n\t\t\t\t\t\t\t\t\t.addClass('modularity-incompatible-area');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log('Incompability information not defined - ' + error);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstop(event, ui) {\r\n\t\t\t\tjQuery('[id^=modularity-mb-]').removeClass(\r\n\t\t\t\t\t'modularity-incompatible-area'\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Setup droppable functionallity\r\n\t *\r\n\t * @return {void}\r\n\t */\r\n\tDragAndDrop.prototype.setupDroppable = function () {\r\n\t\t$('.modularity-js-droppable')\r\n\t\t\t.droppable({\r\n\t\t\t\taccept: '.modularity-js-draggable',\r\n\t\t\t\thoverClass: 'modularity-state-droppable',\r\n\t\t\t\tdrop: function (e, ui) {\r\n\t\t\t\t\tthis.appendModule(e, ui);\r\n\t\t\t\t}.bind(this),\r\n\t\t\t})\r\n\t\t\t.bind(this);\r\n\t};\r\n\r\n\t/**\r\n\t * Appends a module to the target when dropped\r\n\t *\r\n\t * @param  {Object} e  Event\r\n\t * @param  {Object} ui UI\r\n\t * @return {void}\r\n\t */\r\n\tDragAndDrop.prototype.appendModule = function (e, ui) {\r\n\t\tconst module = ui.draggable;\r\n\t\tconst moduleName = module.find('.modularity-module-name').text();\r\n\t\tconst moduleId = module.data('module-id');\r\n\t\tconst incompability = module.attr('data-sidebar-incompability');\r\n\r\n\t\tModularity.Editor.Module.addModule(\r\n\t\t\te.target,\r\n\t\t\tmoduleId,\r\n\t\t\tmoduleName,\r\n\t\t\tundefined,\r\n\t\t\tundefined,\r\n\t\t\tundefined,\r\n\t\t\tundefined,\r\n\t\t\tundefined,\r\n\t\t\tincompability\r\n\t\t);\r\n\t};\r\n\r\n\treturn new DragAndDrop();\r\n})(jQuery);\r\n","/* eslint-disable camelcase */\r\n/* eslint-disable no-undef */\r\n/* eslint-disable no-implicit-globals */\r\nexport default (function ($) {\r\n\tfunction Autosave() {\r\n\t\t$(function () {\r\n\t\t\t// this.handleEvents();\r\n\t\t});\r\n\t}\r\n\r\n\tAutosave.prototype.save = function (selector) {\r\n\t\t$('#modularity-options #publishing-action .spinner').css(\r\n\t\t\t'visibility',\r\n\t\t\t'visible'\r\n\t\t);\r\n\t\tconst request = $(selector).serializeObject();\r\n\t\trequest.id = modularity_post_id;\r\n\t\trequest.action = 'save_modules';\r\n\r\n\t\t$.post(ajaxurl, request, function () {\r\n\t\t\t$('#modularity-options #publishing-action .spinner').css(\r\n\t\t\t\t'visibility',\r\n\t\t\t\t'hidden'\r\n\t\t\t);\r\n\t\t});\r\n\t};\r\n\r\n\treturn new Autosave();\r\n})(jQuery);\r\n","/* eslint-disable sort-imports */\r\n/* eslint-disable no-use-before-define */\r\n/* eslint-disable no-var */\r\n/* eslint-disable no-undef */\r\nimport Modal from './prompt/modal';\r\nimport Widget from './helpers/widget';\r\nimport Helpers from './helpers/helpers';\r\nimport Validate from './editor/validate';\r\nimport Thickbox from './editor/thickbox';\r\nimport Module from './editor/module';\r\nimport DragAndDrop from './editor/dragAndDrop';\r\nimport Autosave from './editor/autosave';\r\n\r\nvar Modularity = Modularity || {};\r\nModularity.Prompt = {Modal};\r\nModularity.Helpers = Helpers;\r\nModularity.Helpers.Widget = Widget;\r\nModularity.Editor = {Validate, Thickbox, Module, DragAndDrop, Autosave};\r\n\r\n(function ($) {\r\n\t$('input[type=\"checkbox\"].sidebar-area-activator').on('click', function (e) {\r\n\t\tconst isChecked = $(this).is(':checked');\r\n\t\tconst value = $(this).attr('value');\r\n\t\talert(1);\r\n\t\tif (e.shiftKey) {\r\n\t\t\tif (!isChecked) {\r\n\t\t\t\t$(\r\n\t\t\t\t\t'input.sidebar-area-activator[type=\"checkbox\"][value=\"' + value + '\"]'\r\n\t\t\t\t).attr('checked', false);\r\n\t\t\t} else {\r\n\t\t\t\t$(\r\n\t\t\t\t\t'input.sidebar-area-activator[type=\"checkbox\"][value=\"' + value + '\"]'\r\n\t\t\t\t).attr('checked', true);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n})(jQuery);\r\n\r\n(function ($) {\r\n\t// Show spinner when clicking save on Modularity options page\r\n\t$('#modularity-options #publish').on('click', function () {\r\n\t\t$(this).siblings('.spinner').css('visibility', 'visible');\r\n\t});\r\n\r\n\t// Remove the first menu item in the Modularity submenu (admin menu)\r\n\t$('a.wp-first-item[href=\"admin.php?page=modularity\"]').parent('li').remove();\r\n\r\n\t// Trigger autosave when switching tabs\r\n\t$('#modularity-tabs a').on('click', function () {\r\n\t\tif (wp.autosave) {\r\n\t\t\t$(window).unbind();\r\n\r\n\t\t\twp.autosave.server.triggerSave();\r\n\r\n\t\t\t$(document).ajaxComplete(function () {\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t});\r\n})(jQuery);\r\n\r\n/* Auto scrolling content */\r\njQuery(document).ready(function ($) {\r\n\tif ($('#modularity-mb-modules').length) {\r\n\t\tconst offset = $('#modularity-mb-modules').offset();\r\n\t\t$(document).scroll(function () {\r\n\t\t\tif (\r\n\t\t\t\t$(window).scrollTop() + 50 > offset.top &&\r\n\t\t\t\t!$('#modularity-mb-modules').hasClass('is-fixed')\r\n\t\t\t) {\r\n\t\t\t\t$('#modularity-mb-modules').addClass('is-fixed');\r\n\t\t\t} else if (\r\n\t\t\t\t$(window).scrollTop() + 50 < offset.top &&\r\n\t\t\t\t$('#modularity-mb-modules').hasClass('is-fixed')\r\n\t\t\t) {\r\n\t\t\t\t$('#modularity-mb-modules').removeClass('is-fixed');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t$('.modularity-edit-module a').on('click', function (e) {\r\n\t\te.preventDefault();\r\n\r\n\t\tModularity.Editor.Thickbox.postAction = 'edit-inline-not-saved';\r\n\t\tModularity.Prompt.Modal.open($(e.target).closest('a').attr('href'));\r\n\t});\r\n});\r\n\r\n/* Post filters is visible in backend if posttype is set to post or page */\r\njQuery(document).ready(function ($) {\r\n\t$('.frontend-filter').hide();\r\n\r\n\tif (\r\n\t\t$('#modularity-latest-post-type select').val() === 'post' ||\r\n\t\t$('#modularity-latest-post-type select').val() === 'page'\r\n\t) {\r\n\t\t$('.frontend-filter').show();\r\n\t}\r\n\t$('body')\r\n\t\t.on('change', '#modularity-latest-post-type select', function () {\r\n\t\t\tif (\r\n\t\t\t\t$('#modularity-latest-post-type select').val() === 'post' ||\r\n\t\t\t\t$('#modularity-latest-post-type select').val() === 'page'\r\n\t\t\t) {\r\n\t\t\t\t$('.frontend-filter').show();\r\n\t\t\t} else {\r\n\t\t\t\t$('.frontend-filter').hide();\r\n\t\t\t}\r\n\t\t})\r\n\t\t.trigger('change');\r\n});\r\n"]}